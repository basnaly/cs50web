{% extends "petclinic/layout.html" %}

{% block body %}

    <div class="mt-4">

        {% if message %}
            <script>

                document.addEventListener('DOMContentLoaded', function () {
                    const message = document.querySelector('#message').innerHTML;
                    setTimeout(() => {
                        document.querySelector('#message').innerHTML = "";
                    }, 3000)
                    window.location.replace("{% url 'index' %}");
                })

            </script>
            <div class="ms-3 text-danger fs-5" id="message">{{ message }}</div>
        {% endif %} 

        <form action="{% url 'pet_profile' pet.id %}" method="post" class="container d-flex flex-column align-items-center">
            {% csrf_token %}

            <div class="d-flex align-items-center">
                                
                <div class="input-group mb-4 mx-3">
                    <span class="input-group-text" id="pet-profile1">Select icon of your pet</span>
                    <select class="form-select fs-4" aria-label="Default select example" name="icon">
                        <option selected>{{ pet.icon }}</option>
                        {% for icon in icons %}
                            <option value={{ icon }} class="text-center fs-4">{{ icon }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group mb-4 mx-3">
                    <input class="form-control text-success fs-5" type="text" name="nickname" value="{{ pet.nickname }}" placeholder="Nickname">
                </div>

            </div>

            <div class="input-group mb-4 mx-3 w-auto"> 
                <span class="input-group-text" id="pet-profile2">Your pet type</span>
                <div class="form-control fs-5" name="pet_type">{{ pet.pet_type}}</div>
            </div>

            <div class="input-group mb-4 mx-3 w-auto">
                <span class="input-group-text" id="pet-profile3">Select your pet's birth date</span>
                <input class="form-control text-success fs-5" type="date" name="birth_date" value="{{ pet.birth_date|date:"Y-m-d" }}">
            </div>

            <div class="form-group mb-4">
                <textarea type="text" name="details" class="form-control text-success fs-5" rows="4" placeholder="Details">{{ pet.details }}</textarea>
            </div>

            <input class="btn btn-success mb-4" type="submit" value="Save Pet">
        </form>

    </div>
    
{% endblock %}